{"openapi":"3.0.1","info":{"title":"Authorization","description":"The NinjaRMM Public API uses OAuth2 to authenticate requests. OAuth 2.0\nallows applications to obtain access to NinjaRMM resources (such as\nmonitoring information) that are made available via the API.\n\nTo start using the OAuth protocol for your app’s authentication with NinjaRMM, you must first\nhave an OAuth app credential from the NinjaRMM system. The OAuth app will have an\n**authorization grant** set up for you. OAuth 2.0 supports various grant types. However,\nNinjaRMM Public API supports **authorization code** and **implicit** grant types."},"security":[],"tags":[],"paths":{"/ws/oauth/authorize":{"get":{"summary":"Authorize user","description":"The first step when authenticating a user using OAuth 2.0 is to send them through\nthe NinjaRMM portal and request permission to act on their behalf.\n\nTo request a user’s authorization to use the NinjaRMM Public APIs on their behalf, \nyou will need to send a user to the above URL with this format.","operationId":"get_authorize","tags":["Endpoints"],"parameters":[{"name":"response_type","description":"The type of response we'd like to receive.\nUse `code` for **Authorization Code Flow** and `token` for **Implicit Flow**.","in":"query","example":"code","required":true,"schema":{"type":"string","format":"token","enum":["code","token"]}},{"name":"client_id","description":"The Client ID of the application that is requesting to authenticate\nthe user.","in":"query","required":true,"schema":{"type":"string"}},{"name":"client_secret","description":"The Client Secret of the application that is requesting to authenticate\nthe user. This value is **required** for private client applications.","in":"query","required":false,"schema":{"type":"string"}},{"name":"redirect_uri","description":"The URL to which NinjaRMM redirects the browser after the user has granted\nor denied the application permission. This URL must match the\nredirect URL in the configuration of your application. It must be a\nvalid HTTPS URL and it needs to be able to handle the redirection to\ncomplete the next step in the OAuth 2.0 flow.","in":"query","example":"http://localhost","required":true,"schema":{"type":"string","format":"url"}},{"name":"state","description":"A custom string of your choice. NinjaRMM will pass the same string to\nthe redirect URL when authentication is complete. This parameter\ncan be used to identify a user on redirect, as well as a CSRF protection\nmechanism if it contains a random value per request.","in":"query","example":"custom_state","required":false,"schema":{"type":"string"}},{"name":"scope","description":"A space-separated list of application scopes that you’d like to authenticate the user for.\nThis defaults to all of the scopes configured for the application in its configuration.","in":"query","example":"monitoring","required":false,"schema":{"type":"string"}},{"name":"code_challenge","description":"A plain or hashed and encoded value generated by the client application.\nThis value is verified before the client application is allowed to exchange an\nauthorization code for a set of tokens. This value is required for\npublic client applications using PKCE.","in":"query","required":false,"schema":{"type":"string"}},{"name":"code_challenge_method","description":"The method used to generate the value of the `code_challenge` parameter.","in":"query","required":false,"schema":{"type":"string","format":"token","enum":["plain","S256"]}}],"responses":{"default":{"description":"Does not return any data, but rather should be used in the browser.","content":{"text/html":{"schema":{"type":"string","format":"html"}}}}}}},"/ws/oauth/token":{"post":{"summary":"Request access token","description":"Request an Access Token using a client-side obtained OAuth 2.0 authorization code.\n\nAn Access Token is a string that enables NinjaRMM to verify that a request belongs\nto an authorized session. In the normal order of operations, you will begin by requesting\nauthentication from the [authorize](#authorization/get_authorize) endpoint and NinjaRMM \nwill send you an authorization code.\n\nYou will then send this code to the endpoint to exchange it for an Access Token.\nThe returned Access Token can then be used to make NinjaRMM Public API calls.","operationId":"post_oauth2_token","tags":["Endpoints"],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/PostOAuth2Token"}}}},"responses":{"200":{"description":"Returns a new Access Token that can be used to make authenticated\nAPI calls by passing along the token in a authorization header as\nfollows `Authorization: Bearer <Token>`.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessToken"}}}},"400":{"description":"An authentication error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuth2Error"}}}}}}}},"components":{"schemas":{"PostOAuth2Token":{"title":"Token request","type":"object","description":"A request for a new OAuth 2.0 token","required":["grant_type","client_id"],"properties":{"grant_type":{"type":"string","format":"urn","example":"authorization_code","description":"The type of request being made, either using a client-side obtained\nauthorization code or refresh token for the purpose of downscoping a token.","enum":["authorization_code","client_credentials","refresh_token"]},"client_id":{"type":"string","description":"The Client ID of the application requesting an access token."},"client_secret":{"type":"string","description":"The client secret of the application requesting an access token.\nThis value is **required** when the client application is a private client."},"scope":{"type":"string","example":"monitoring","description":"A space-separated list of application scopes that you’d like to authenticate the user for.\nThis defaults to all of the scopes configured for the application in its configuration."},"code":{"type":"string","format":"token","description":"The client-side authorization code passed to your application by\nNinjaRMM in the browser redirect after the user has successfully\ngranted your application permission to make API calls on their\nbehalf.\n\nUsed in combination with `authorization_code` as the `grant_type`."},"refresh_token":{"type":"string","format":"token","description":"A refresh token which is used to get a new access token.\n\nUsed in combination with `refresh_token` as the `grant_type`."},"redirect_uri":{"type":"string","format":"url","description":"The redirect URL included in the initial authorization request.\nThis value is **required** when exchanging the `code` for an `access_token`","example":"http://localhost"},"code_verifier":{"type":"string","description":"The PKCE code verifier that your app generated at the beginning of the authorization request.\nThis value is **required** when using PKCE parameters during the authorize request."}}},"AccessToken":{"title":"Access token","type":"object","description":"A token that can be used to make authenticated API calls.","properties":{"access_token":{"type":"string","format":"token","example":"Qu5h5FzU9s_Dz7n4ZwJ5bWjg3CcupFW8lO7F_rPAsU4.N24zCN5F0ix3xZAsII0QomA7HALN1grDDbeyGCG0aOj","description":"The requested access token."},"expires_in":{"type":"integer","format":"int64","example":3600,"description":"The time in seconds in seconds by which this token will expire."},"token_type":{"type":"string","enum":["bearer"],"example":"bearer","description":"The type of access token returned."},"refresh_token":{"type":"string","format":"token","example":"851fe9c6-e130-4e15-f1e0-ae6d54f37ecf.kmlLuF5rTKklWJrHxGYNJ2AvbrY8v8PyryfH9JExlRk=","description":"The refresh token for this access token, if offline access was requested,\nwhich can be used to request a new access token when the current one expires."},"scope":{"type":"string","example":"monitoring offline_access","description":"The requested scope associated with the `access_token`."}}},"OAuth2Error":{"title":"OAuth 2.0 error","type":"object","description":"An OAuth 2.0 error","properties":{"error":{"type":"string","example":"invalid_client","description":"The type of the error returned."},"error_description":{"type":"string","example":"The client credentials are not valid","description":"The type of the error returned."}}}}}}